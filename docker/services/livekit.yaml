services:
  livekit:
    image: livekit/livekit-server:latest
    platform: linux/arm64
    restart: unless-stopped
    network_mode: host
    environment:
      - LIVEKIT_API_KEY=${LK_API_KEY}
      - LIVEKIT_API_SECRET=${LK_API_SECRET}
    volumes:
      - ../../services/livekit/livekit.yaml:/etc/livekit.yaml:ro
    command: --config /etc/livekit.yaml --node-ip 127.0.0.1
    depends_on:
      - turn
      - redis
      - db
      - chromadb

networks:
  default:
    driver: bridge
